<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TableCard</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous" />
    <link rel="stylesheet" href="./styles/global.css" />
    <link rel="stylesheet" href="./styles/main.css" />
  </head>
  <body>
    <!-- Score Card -->
    <% if(locals.setupData) {%>
    <div class="vertical-center mx-auto">
      <div class="container">
        <!-- score card table -->
        <div class="table-wrapper">
          <table id="score-card-table" class="table table-warning">
            <thead>
              <tr>
                <th
                  colspan="8"
                  class="display-3 fw-bold text-white text-center"
                  id="title">
                  Clue üîç
                </th>
              </tr>
              <tr>
                <th>
                  <!-- New Game Button -->
                  <form action="/setup" method="get">
                    <input
                      class="btn btn-secondary btn-new-game"
                      type="submit"
                      value="New Game" />
                  </form>
                </th>

                <th colspan="7" class="right">
                  <button type="button" class="btn btn-danger btn-make-query">
                    Make Accusation
                  </button>
                </th>
              </tr>
              <tr>
                <th>
                  <div class="d-inline-flex" style="width: 150px">
                    <p
                      class="turn-btn prev-btn mx-auto"
                      id="btn-previous-player">
                      &#171;
                    </p>
                    <p id="current-player">Current Player</p>
                    <p class="turn-btn next-btn mx-auto" id="btn-next-player">
                      &#187;
                    </p>
                  </div>
                </th>
                <!-- I need to build this part dynamically depending upon how many players there are -->
                <% for(let i = 0; i < setupData.players.length; i++){ %>
                <th class="player-header"><%= setupData.players[i].name%></th>
                <% } %>
                <th class="player-header">Accuse</th>
              </tr>
            </thead>
            <tr>
              <th
                colspan="<%= setupData.players.length +2 %>"
                class="table-dark">
                WHO?
              </th>
            </tr>
            <tr id="green">
              <th>Mr. Green</th>
              <!-- I need to build this part dynamically depending upon how many players there are -->
              <% for(let i = 0; i < setupData.players.length; i++){ %>

              <td class="text-center P<%= setupData.players[i].turnNumber %>">
                <span
                  class="prob-bar"
                  id="P<%= setupData.players[i].turnNumber%>"></span
                >?
              </td>
              <% } %>
              <td class="td-accused">
                <div class="form-check">
                  <input
                    class="form-check-input accused"
                    type="radio"
                    name="suspect"
                    value="green" />
                </div>
              </td>
            </tr>
            <tr id="mustard">
              <th>Col. Mustard</th>
              <!-- I need to build this part dynamically depending upon how many players there are -->
              <% for(let i = 0; i < setupData.players.length; i++){ %>
              <td class="text-center P<%= setupData.players[i].turnNumber %>">
                <span
                  class="prob-bar"
                  id="P<%= setupData.players[i].turnNumber%>"></span
                >?
              </td>
              <% } %>
              <td class="td-accused">
                <div class="form-check">
                  <input
                    class="form-check-input accused"
                    type="radio"
                    name="suspect"
                    value="mustard" />
                </div>
              </td>
            </tr>
            <tr id="peacock">
              <th>Mrs. Peacock</th>
              <!-- I need to build this part dynamically depending upon how many players there are -->
              <% for(let i = 0; i < setupData.players.length; i++){ %>
              <td class="text-center P<%= setupData.players[i].turnNumber %>">
                <span
                  class="prob-bar"
                  id="P<%= setupData.players[i].turnNumber%>"></span
                >?
              </td>
              <% } %>
              <td class="td-accused">
                <div class="form-check">
                  <input
                    class="form-check-input accused"
                    type="radio"
                    name="suspect"
                    value="peacock" />
                </div>
              </td>
            </tr>
            <tr id="plum">
              <th>Prof. Plum</th>
              <!-- I need to build this part dynamically depending upon how many players there are -->
              <% for(let i = 0; i < setupData.players.length; i++){ %>
              <td class="text-center P<%= setupData.players[i].turnNumber %>">
                <span
                  class="prob-bar"
                  id="P<%= setupData.players[i].turnNumber%>"></span
                >?
              </td>
              <% } %>
              <td class="td-accused">
                <div class="form-check">
                  <input
                    class="form-check-input accused"
                    type="radio"
                    name="suspect"
                    value="plum" />
                </div>
              </td>
            </tr>
            <tr id="scarlet">
              <th>Miss Scarlet</th>
              <!-- I need to build this part dynamically depending upon how many players there are -->
              <% for(let i = 0; i < setupData.players.length; i++){ %>
              <td class="text-center P<%= setupData.players[i].turnNumber %>">
                <span
                  class="prob-bar"
                  id="P<%= setupData.players[i].turnNumber%>"></span
                >?
              </td>
              <% } %>
              <td class="td-accused">
                <div class="form-check">
                  <input
                    class="form-check-input accused"
                    type="radio"
                    name="suspect"
                    value="scarlet" />
                </div>
              </td>
            </tr>
            <tr id="white">
              <th>Mrs. White</th>
              <!-- I need to build this part dynamically depending upon how many players there are -->
              <% for(let i = 0; i < setupData.players.length; i++){ %>
              <td class="text-center P<%= setupData.players[i].turnNumber %>">
                <span
                  class="prob-bar"
                  id="P<%= setupData.players[i].turnNumber%>"></span
                >?
              </td>
              <% } %>
              <td class="td-accused">
                <div class="form-check">
                  <input
                    class="form-check-input accused"
                    type="radio"
                    name="suspect"
                    value="white" />
                </div>
              </td>
            </tr>
            <tr>
              <th
                colspan="<%= setupData.players.length +1 %>"
                class="table-dark">
                WHAT?
              </th>
            </tr>
            <tr id="knife">
              <th>Knife</th>
              <!-- I need to build this part dynamically depending upon how many players there are -->
              <% for(let i = 0; i < setupData.players.length; i++){ %>
              <td class="text-center P<%= setupData.players[i].turnNumber %>">
                <span
                  class="prob-bar"
                  id="P<%= setupData.players[i].turnNumber%>"></span
                >?
              </td>
              <% } %>
              <td class="td-accused">
                <div class="form-check">
                  <input
                    class="form-check-input accused"
                    type="radio"
                    name="weapon"
                    value="knife" />
                </div>
              </td>
            </tr>
            <tr id="candlestick">
              <th>Candle Stick</th>
              <!-- I need to build this part dynamically depending upon how many players there are -->
              <% for(let i = 0; i < setupData.players.length; i++){ %>
              <td class="text-center P<%= setupData.players[i].turnNumber %>">
                <span
                  class="prob-bar"
                  id="P<%= setupData.players[i].turnNumber%>"></span
                >?
              </td>
              <% } %>
              <td class="td-accused">
                <div class="form-check">
                  <input
                    class="form-check-input accused"
                    type="radio"
                    name="weapon"
                    value="candlestick" />
                </div>
              </td>
            </tr>
            <tr id="revolver">
              <th>Revolver</th>
              <!-- I need to build this part dynamically depending upon how many players there are -->
              <% for(let i = 0; i < setupData.players.length; i++){ %>
              <td class="text-center P<%= setupData.players[i].turnNumber %>">
                <span
                  class="prob-bar"
                  id="P<%= setupData.players[i].turnNumber%>"></span
                >?
              </td>
              <% } %>
              <td class="td-accused">
                <div class="form-check">
                  <input
                    class="form-check-input accused"
                    type="radio"
                    name="weapon"
                    value="revolver" />
                </div>
              </td>
            </tr>
            <tr id="rope">
              <th>Rope</th>
              <!-- I need to build this part dynamically depending upon how many players there are -->
              <% for(let i = 0; i < setupData.players.length; i++){ %>
              <td class="text-center P<%= setupData.players[i].turnNumber %>">
                <span
                  class="prob-bar"
                  id="P<%= setupData.players[i].turnNumber%>"></span
                >?
              </td>
              <% } %>
              <td class="td-accused">
                <div class="form-check">
                  <input
                    class="form-check-input accused"
                    type="radio"
                    name="weapon"
                    value="rope" />
                </div>
              </td>
            </tr>
            <tr id="lead-pipe">
              <th>Lead Pipe</th>
              <!-- I need to build this part dynamically depending upon how many players there are -->
              <% for(let i = 0; i < setupData.players.length; i++){ %>
              <td class="text-center P<%= setupData.players[i].turnNumber %>">
                <span
                  class="prob-bar"
                  id="P<%= setupData.players[i].turnNumber%>"></span
                >?
              </td>
              <% } %>
              <td class="td-accused">
                <div class="form-check">
                  <input
                    class="form-check-input accused"
                    type="radio"
                    name="weapon"
                    value="lead-pipe" />
                </div>
              </td>
            </tr>
            <tr id="wrench">
              <th>Wrench</th>
              <!-- I need to build this part dynamically depending upon how many players there are -->
              <% for(let i = 0; i < setupData.players.length; i++){ %>
              <td class="text-center P<%= setupData.players[i].turnNumber %>">
                <span
                  class="prob-bar"
                  id="P<%= setupData.players[i].turnNumber%>"></span
                >?
              </td>
              <% } %>
              <td class="td-accused">
                <div class="form-check">
                  <input
                    class="form-check-input accused"
                    type="radio"
                    name="weapon"
                    value="wrench" />
                </div>
              </td>
            </tr>
            <tr>
              <th
                colspan="<%= setupData.players.length +1 %>"
                class="table-dark">
                WHERE?
              </th>
            </tr>
            <tr id="hall">
              <th>Hall</th>
              <!-- I need to build this part dynamically depending upon how many players there are -->
              <% for(let i = 0; i < setupData.players.length; i++){ %>
              <td class="text-center P<%= setupData.players[i].turnNumber %>">
                <span
                  class="prob-bar"
                  id="P<%= setupData.players[i].turnNumber%>"></span
                >?
              </td>
              <% } %>
              <td class="td-accused">
                <div class="form-check">
                  <input
                    class="form-check-input accused"
                    type="radio"
                    name="room"
                    value="hall" />
                </div>
              </td>
            </tr>
            <tr id="lounge">
              <th>Lounge</th>
              <!-- I need to build this part dynamically depending upon how many players there are -->
              <% for(let i = 0; i < setupData.players.length; i++){ %>
              <td class="text-center P<%= setupData.players[i].turnNumber %>">
                <span
                  class="prob-bar"
                  id="P<%= setupData.players[i].turnNumber%>"></span
                >?
              </td>
              <% } %>
              <td class="td-accused">
                <div class="form-check">
                  <input
                    class="form-check-input accused"
                    type="radio"
                    name="room"
                    value="lounge" />
                </div>
              </td>
            </tr>
            <tr id="dining-room">
              <th>Dining Room</th>
              <!-- I need to build this part dynamically depending upon how many players there are -->
              <% for(let i = 0; i < setupData.players.length; i++){ %>
              <td class="text-center P<%= setupData.players[i].turnNumber %>">
                <span
                  class="prob-bar"
                  id="P<%= setupData.players[i].turnNumber%>"></span
                >?
              </td>
              <% } %>
              <td class="td-accused">
                <div class="form-check">
                  <input
                    class="form-check-input accused"
                    type="radio"
                    name="room"
                    value="dining-room" />
                </div>
              </td>
            </tr>
            <tr id="kitchen">
              <th>Kitchen</th>
              <!-- I need to build this part dynamically depending upon how many players there are -->
              <% for(let i = 0; i < setupData.players.length; i++){ %>
              <td class="text-center P<%= setupData.players[i].turnNumber %>">
                <span
                  class="prob-bar"
                  id="P<%= setupData.players[i].turnNumber%>"></span
                >?
              </td>
              <% } %>
              <td class="td-accused">
                <div class="form-check">
                  <input
                    class="form-check-input accused"
                    type="radio"
                    name="room"
                    value="kitchen" />
                </div>
              </td>
            </tr>
            <tr id="ball-room">
              <th>Ball Room</th>
              <!-- I need to build this part dynamically depending upon how many players there are -->
              <% for(let i = 0; i < setupData.players.length; i++){ %>
              <td class="text-center P<%= setupData.players[i].turnNumber %>">
                <span
                  class="prob-bar"
                  id="P<%= setupData.players[i].turnNumber%>"></span
                >?
              </td>
              <% } %>
              <td class="td-accused">
                <div class="form-check">
                  <input
                    class="form-check-input accused"
                    type="radio"
                    name="room"
                    value="ball-room" />
                </div>
              </td>
            </tr>
            <tr id="conservatory">
              <th>Conservatory</th>
              <!-- I need to build this part dynamically depending upon how many players there are -->
              <% for(let i = 0; i < setupData.players.length; i++){ %>
              <td class="text-center P<%= setupData.players[i].turnNumber %>">
                <span
                  class="prob-bar"
                  id="P<%= setupData.players[i].turnNumber%>"></span
                >?
              </td>
              <% } %>
              <td class="td-accused">
                <div class="form-check">
                  <input
                    class="form-check-input accused"
                    type="radio"
                    name="room"
                    value="conservatory" />
                </div>
              </td>
            </tr>
            <tr id="billiard-room">
              <th>Billiard Room</th>
              <!-- I need to build this part dynamically depending upon how many players there are -->
              <% for(let i = 0; i < setupData.players.length; i++){ %>
              <td class="text-center P<%= setupData.players[i].turnNumber %>">
                <span
                  class="prob-bar"
                  id="P<%= setupData.players[i].turnNumber%>"></span
                >?
              </td>
              <% } %>
              <td class="td-accused">
                <div class="form-check">
                  <input
                    class="form-check-input accused"
                    type="radio"
                    name="room"
                    value="billiard-room" />
                </div>
              </td>
            </tr>
            <tr id="library">
              <th>Library</th>
              <!-- I need to build this part dynamically depending upon how many players there are -->
              <% for(let i = 0; i < setupData.players.length; i++){ %>
              <td class="text-center P<%= setupData.players[i].turnNumber %>">
                <span
                  class="prob-bar"
                  id="P<%= setupData.players[i].turnNumber%>"></span
                >?
              </td>
              <% } %>
              <td class="td-accused">
                <div class="form-check">
                  <input
                    class="form-check-input accused"
                    type="radio"
                    name="room"
                    value="library" />
                </div>
              </td>
            </tr>
            <tr id="study">
              <th>Study</th>
              <!-- I need to build this part dynamically depending upon how many players there are -->
              <% for(let i = 0; i < setupData.players.length; i++){ %>
              <td class="text-center P<%= setupData.players[i].turnNumber %>">
                <span
                  class="prob-bar"
                  id="P<%= setupData.players[i].turnNumber%>"></span
                >?
              </td>
              <% } %>
              <td class="td-accused">
                <div class="form-check">
                  <input
                    class="form-check-input accused"
                    type="radio"
                    name="room"
                    value="study" />
                </div>
              </td>
            </tr>
          </table>
        </div>
      </div>
    </div>
    <% } else { %>
    <h2>"Setup Data does not exist!</h2>
    <% } %>

    <!-- opponent's modal -->
    <div
      class="modal fade"
      id="opponent-modal"
      aria-hidden="true"
      aria-labelledby="exampleModalToggleLabel2"
      tabindex="-1">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="opponent-modal-title">
              Accusation Results
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"></button>
          </div>

          <!-- form to get who showed card -->
          <form id="who-gave-cards-form" novalidate>
            <div class="modal-body" id="opponent-modal-body">
              <p id="instructions">Who showed a card?</p>

              <div class="input-group mb-3">
                <div class="input-group-prepend">
                  <label class="input-group-text" for="answerer-input"
                    >Player</label
                  >
                </div>
                <select class="custom-select col-8" id="answerer-input">
                  <option selected>No One</option>
                  <% for(let i = 0; i < setupData.players.length; i++){ %>
                  <option><%= setupData.players[i].name %></option>
                  <% } %>
                </select>
              </div>

              <!-- end of who gave answer form -->
            </div>
            <div class="modal-footer">
              <button
                id="btn-recordQuery"
                class="btn btn-primary"
                aria-label="Close">
                Submit
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
    <!-- end of modal -->

    <!-- main player's query modal -->
    <div
      class="modal fade"
      id="main-player-modal"
      aria-hidden="true"
      aria-labelledby="exampleModalToggleLabel2"
      tabindex="-1">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="main-player-modal-title">Log Clues</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"></button>
          </div>

          <!-- form to get who showed card -->
          <form id="main-player-info-recieved" novalidate>
            <div class="modal-body" id="main-player-modal-body">
              <p id="instructions2">Enter the info you recieved!</p>

              <div class="input-group mb-3">
                <div class="input-group-prepend">
                  <label class="input-group-text" for="clue-input"
                    >Player Who Gave Info:</label
                  >
                </div>
                <select class="custom-select col-7" id="clue-input">
                  <option selected>No One</option>
                  <% for(let i = 0; i < setupData.players.length; i++){ %>
                  <option><%= setupData.players[i].name %></option>
                  <% } %>
                </select>
              </div>

              <!-- end of who gave answer form -->
            </div>
            <div class="modal-footer">
              <button
                id="btn-recordClues"
                class="btn btn-primary"
                aria-label="Close">
                Submit
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
    <!-- end of modal -->

    <!-- alert-accusation-icomplete modal -->
    <div
      class="modal fade"
      id="alert-accusation-incomplete"
      tabindex="-1"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="alert-header-label">Hold Up</h1>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"></button>
          </div>
          <div class="modal-body">
            Slow down detective. You forgot to select a suspect, weapon, and
            room!
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal">
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- script for jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <!-- script for bootstrap -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"></script>
    ¬†

    <!-- script for external js -->

    <script type="module" src="classes.js"></script>
    <script type="module" src="score-card.js"></script>
  </body>
</html>
